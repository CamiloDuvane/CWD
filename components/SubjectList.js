function SubjectList({ onNavigate }) {
  const [answeredQuizzes, setAnsweredQuizzes] = React.useState([]);
  const [subjects] = React.useState([
    { 
      id: 1, 
      name: 'Matem√°tica', 
      icon: 'üìê',
      topics: [
        {
          title: '√Ålgebra',
          subtitle: 'Estudo de equa√ß√µes e fun√ß√µes matem√°ticas',
          content: 'A √°lgebra √© um ramo fundamental da matem√°tica que lida com s√≠mbolos e as regras para manipul√°-los. Inclui o estudo de equa√ß√µes, fun√ß√µes, express√µes matem√°ticas e suas propriedades. Conceitos principais: equa√ß√µes lineares e quadr√°ticas, sistemas de equa√ß√µes, fun√ß√µes e gr√°ficos.'
        },
        {
          title: 'Geometria',
          subtitle: 'Formas, √°reas e volumes',
          content: 'A geometria estuda as propriedades das formas no espa√ßo. Inclui o c√°lculo de √°reas, volumes, √¢ngulos e a compreens√£o das rela√ß√µes entre diferentes formas geom√©tricas. T√≥picos principais: geometria plana, espacial, anal√≠tica e trigonometria.'
        },
        {
          title: 'Trigonometria',
          subtitle: 'Rela√ß√µes entre √¢ngulos e lados',
          content: 'A trigonometria √© o estudo das rela√ß√µes entre os lados e √¢ngulos de tri√¢ngulos. Fundamental para engenharia, f√≠sica e outras ci√™ncias aplicadas. Inclui seno, cosseno, tangente e suas aplica√ß√µes.'
        },
        {
          title: 'Estat√≠stica',
          subtitle: 'An√°lise e interpreta√ß√£o de dados',
          content: 'A estat√≠stica √© a ci√™ncia da coleta, an√°lise e interpreta√ß√£o de dados. Inclui conceitos como m√©dia, mediana, moda, desvio padr√£o e probabilidade. Essencial para pesquisa e tomada de decis√µes baseada em dados.'
        },
        {
          title: 'Probabilidade',
          subtitle: 'C√°lculo de chances e eventos',
          content: 'A probabilidade estuda a chance de eventos ocorrerem. Fundamental para estat√≠stica, teoria dos jogos e an√°lise de risco. Inclui conceitos como eventos independentes, probabilidade condicional e distribui√ß√µes.'
        }
      ],
      quizzes: [
        {
          question: "Qual √© a solu√ß√£o da equa√ß√£o 2x + 5 = 13?",
          options: ["x = 4", "x = 6", "x = 8", "x = 3"],
          correct_answer: 0
        },
        {
          question: "Qual √© a √°rea de um quadrado com lado 5?",
          options: ["20", "25", "15", "30"],
          correct_answer: 1
        },
        {
          question: "Qual √© o valor de œÄ (pi) arredondado para duas casas decimais?",
          options: ["3.14", "3.16", "3.12", "3.18"],
          correct_answer: 0
        }
      ]
    },
    { 
      id: 2, 
      name: 'Portugu√™s', 
      icon: 'üìö',
      topics: [
        {
          title: 'Gram√°tica',
          subtitle: 'Regras e estrutura da l√≠ngua',
          content: 'A gram√°tica √© o estudo das regras e estruturas da l√≠ngua portuguesa. Inclui conceitos como conjuga√ß√£o de verbos, concord√¢ncia de substantivos e adjetivos, e estrutura de frases.'
        },
        {
          title: 'Literatura',
          subtitle: 'Estudo de obras liter√°rias',
          content: 'A literatura √© o estudo de obras liter√°rias, incluindo poesia, prosa, teatro e outros g√™neros. Inclui an√°lise de temas, personagens, estilo e estrutura.'
        },
        {
          title: 'Reda√ß√£o',
          subtitle: 'T√©cnicas de escrita e composi√ß√£o',
          content: 'A reda√ß√£o √© a t√©cnica de escrita e composi√ß√£o de textos. Inclui conceitos como estrutura de par√°grafos, uso de conectivos, e coer√™ncia textual.'
        },
        {
          title: 'Interpreta√ß√£o de Texto',
          subtitle: 'An√°lise e compreens√£o',
          content: 'A interpreta√ß√£o de texto √© a an√°lise e compreens√£o de textos, incluindo a identifica√ß√£o de temas, personagens, e estrutura.'
        },
        {
          title: 'Lingu√≠stica',
          subtitle: 'Estudo cient√≠fico da linguagem',
          content: 'A lingu√≠stica √© o estudo cient√≠fico da linguagem, incluindo conceitos como fonologia, morfologia, sintaxe e sem√¢ntica.'
        }
      ],
      quizzes: [
        {
          question: "O que √© uma ora√ß√£o subordinada?",
          options: [
            "Uma ora√ß√£o que depende sintaticamente de outra",
            "Uma ora√ß√£o independente",
            "Um conjunto de palavras sem sentido",
            "Uma frase sem verbo"
          ],
          correct_answer: 0
        },
        {
          question: "Qual √© a fun√ß√£o do sujeito em uma frase?",
          options: [
            "Realizar a a√ß√£o",
            "Sofrer a a√ß√£o",
            "Modificar o verbo",
            "Complementar o objeto"
          ],
          correct_answer: 0
        }
      ]
    },
    {
      id: 3,
      name: 'Biologia',
      icon: 'üß¨',
      topics: [
        {
          title: 'Gen√©tica',
          subtitle: 'Estudo da hereditariedade',
          content: 'A gen√©tica √© o ramo da biologia que estuda como as caracter√≠sticas s√£o transmitidas de uma gera√ß√£o para outra. Inclui o estudo do DNA, genes, cromossomos e padr√µes de heran√ßa.'
        },
        {
          title: 'Evolu√ß√£o',
          subtitle: 'Teoria da evolu√ß√£o das esp√©cies',
          content: 'A teoria da evolu√ß√£o explica como as esp√©cies mudam ao longo do tempo atrav√©s da sele√ß√£o natural e outros mecanismos.'
        }
      ],
      quizzes: [
        {
          question: "Qual √© a mol√©cula respons√°vel pelo armazenamento da informa√ß√£o gen√©tica?",
          options: ["DNA", "RNA", "Prote√≠na", "Carboidrato"],
          correct_answer: 0
        },
        {
          question: "Quem prop√¥s a teoria da evolu√ß√£o por sele√ß√£o natural?",
          options: ["Charles Darwin", "Gregor Mendel", "Louis Pasteur", "Robert Hooke"],
          correct_answer: 0
        }
      ]
    },
    {
      id: 4,
      name: 'Qu√≠mica',
      icon: '‚öóÔ∏è',
      topics: [
        {
          title: 'Qu√≠mica Org√¢nica',
          subtitle: 'Estudo dos compostos de carbono',
          content: 'A qu√≠mica org√¢nica √© o estudo dos compostos que cont√™m carbono, incluindo hidrocarbonetos, √°lcoois, √°cidos e outros grupos funcionais.'
        },
        {
          title: 'Qu√≠mica Inorg√¢nica',
          subtitle: 'Compostos sem carbono',
          content: 'Estuda compostos que geralmente n√£o cont√™m carbono, incluindo metais, √°cidos, bases e sais.'
        }
      ],
      quizzes: [
        {
          question: "Qual √© o n√∫mero at√¥mico do carbono?",
          options: ["4", "6", "8", "12"],
          correct_answer: 1
        },
        {
          question: "O que √© um mol?",
          options: [
            "6,022 x 10¬≤¬≥ unidades",
            "1 grama de hidrog√™nio",
            "1 litro de √°gua",
            "1 kg de carbono"
          ],
          correct_answer: 0
        }
      ]
    },
    {
      id: 5,
      name: 'F√≠sica',
      icon: '‚ö°',
      topics: [
        {
          title: 'Mec√¢nica',
          subtitle: 'Estudo do movimento',
          content: 'A mec√¢nica estuda o movimento dos corpos e as for√ßas que atuam sobre eles, incluindo cinem√°tica, din√¢mica e est√°tica.'
        },
        {
          title: 'Termodin√¢mica',
          subtitle: 'Calor e energia',
          content: 'Estuda as rela√ß√µes entre calor, energia e trabalho em sistemas f√≠sicos.'
        }
      ],
      quizzes: [
        {
          question: "Qual √© a unidade de for√ßa no SI?",
          options: ["Newton", "Joule", "Watt", "Pascal"],
          correct_answer: 0
        },
        {
          question: "O que √© velocidade?",
          options: [
            "Dist√¢ncia/Tempo",
            "For√ßa/Massa",
            "Massa/Volume",
            "Energia/Tempo"
          ],
          correct_answer: 0
        }
      ]
    },
    {
      id: 6,
      name: 'Arte',
      icon: 'üé®',
      topics: [
        {
          title: 'Hist√≥ria da Arte',
          subtitle: 'Evolu√ß√£o art√≠stica',
          content: 'Estudo da evolu√ß√£o das express√µes art√≠sticas ao longo do tempo, incluindo diferentes per√≠odos e movimentos art√≠sticos.'
        },
        {
          title: 'T√©cnicas Art√≠sticas',
          subtitle: 'M√©todos de cria√ß√£o',
          content: 'Explora√ß√£o de diferentes t√©cnicas de cria√ß√£o art√≠stica, incluindo pintura, escultura, desenho e arte digital.'
        }
      ],
      quizzes: [
        {
          question: "Quem pintou a Mona Lisa?",
          options: [
            "Leonardo da Vinci",
            "Michelangelo",
            "Rafael",
            "Van Gogh"
          ],
          correct_answer: 0
        },
        {
          question: "Qual movimento art√≠stico √© conhecido por formas geom√©tricas e abstratas?",
          options: ["Cubismo", "Impressionismo", "Realismo", "Barroco"],
          correct_answer: 0
        }
      ]
    },
    { 
      id: 7, 
      name: 'Hist√≥ria', 
      icon: 'üèõÔ∏è',
      topics: [
        {
          title: 'Hist√≥ria Antiga',
          subtitle: 'Primeiras civiliza√ß√µes',
          content: 'A hist√≥ria antiga √© o estudo das primeiras civiliza√ß√µes, incluindo a Mesopot√¢mia, o Egito, a Gr√©cia e Roma.'
        },
        {
          title: 'Hist√≥ria Medieval',
          subtitle: 'Idade M√©dia',
          content: 'A hist√≥ria medieval √© o estudo da Idade M√©dia, incluindo a forma√ß√£o de reinos e imp√©rios, a Igreja Cat√≥lica e a sociedade feudal.'
        },
        {
          title: 'Hist√≥ria Moderna',
          subtitle: 'Renascimento √† Revolu√ß√£o Industrial',
          content: 'A hist√≥ria moderna √© o estudo do per√≠odo que vai do Renascimento √† Revolu√ß√£o Industrial, incluindo a forma√ß√£o de Estados nacionais, a expans√£o colonial e a Revolu√ß√£o Francesa.'
        },
        {
          title: 'Hist√≥ria Contempor√¢nea',
          subtitle: 'S√©culo XIX at√© hoje',
          content: 'A hist√≥ria contempor√¢nea √© o estudo do per√≠odo que vai do s√©culo XIX at√© hoje, incluindo a forma√ß√£o de blocos pol√≠ticos, a Guerra Fria e a globaliza√ß√£o.'
        },
        {
          title: 'Hist√≥ria do Brasil',
          subtitle: 'Da coloniza√ß√£o √† atualidade',
          content: 'A hist√≥ria do Brasil √© o estudo da forma√ß√£o e evolu√ß√£o do pa√≠s, desde a coloniza√ß√£o at√© a atualidade.'
        }
      ],
      quizzes: [
        {
          question: "Qual √© o nome do imperador romano que construiu o Coliseu?",
          options: ["Nero", "Vespasiano", "Tito", "Domiciano"],
          correct_answer: 1
        },
        {
          question: "Quem √© o autor da obra 'O Principe'?",
          options: ["Maquiavel", "Montesquieu", "Rousseau", "Voltaire"],
          correct_answer: 0
        }
      ]
    },
    { 
      id: 8, 
      name: 'Geografia', 
      icon: 'üåé',
      topics: [
        {
          title: 'Geografia F√≠sica',
          subtitle: 'Relevo, clima e vegeta√ß√£o',
          content: 'A geografia f√≠sica √© o estudo do relevo, clima e vegeta√ß√£o de uma regi√£o.'
        },
        {
          title: 'Geografia Humana',
          subtitle: 'Popula√ß√£o e sociedade',
          content: 'A geografia humana √© o estudo da popula√ß√£o e sociedade de uma regi√£o, incluindo a distribui√ß√£o de pessoas, a estrutura econ√¥mica e a cultura.'
        },
        {
          title: 'Cartografia',
          subtitle: 'Mapas e localiza√ß√£o',
          content: 'A cartografia √© o estudo de mapas e localiza√ß√£o, incluindo a representa√ß√£o de lugares e a navega√ß√£o.'
        },
        {
          title: 'Geopol√≠tica',
          subtitle: 'Rela√ß√µes entre pa√≠ses',
          content: 'A geopol√≠tica √© o estudo das rela√ß√µes entre pa√≠ses, incluindo a pol√≠tica, a economia e a cultura.'
        },
        {
          title: 'Meio Ambiente',
          subtitle: 'Quest√µes ambientais',
          content: 'O meio ambiente √© o estudo das quest√µes ambientais, incluindo a polui√ß√£o, o aquecimento global e a conserva√ß√£o de recursos naturais.'
        }
      ],
      quizzes: [
        {
          question: "Qual √© o maior rio do mundo?",
          options: ["Amazonas", "Nilo", "Mississippi", "Yangtz√©"],
          correct_answer: 1
        },
        {
          question: "Qual √© o nome do maior deserto do mundo?",
          options: ["Sahara", "Gobi", "Mojave", "Atacama"],
          correct_answer: 0
        }
      ]
    },
    { 
      id: 9, 
      name: 'Ci√™ncias', 
      icon: 'üî¨',
      topics: [
        {
          title: 'Biologia',
          subtitle: 'Estudo dos seres vivos',
          content: 'A biologia √© o estudo dos seres vivos, incluindo a estrutura, a fun√ß√£o e a evolu√ß√£o de organismos.'
        },
        {
          title: 'Qu√≠mica',
          subtitle: 'Composi√ß√£o da mat√©ria',
          content: 'A qu√≠mica √© o estudo da composi√ß√£o da mat√©ria, incluindo a estrutura de √°tomos e mol√©culas, e as rea√ß√µes qu√≠micas.'
        },
        {
          title: 'F√≠sica',
          subtitle: 'Leis naturais e energia',
          content: 'A f√≠sica √© o estudo das leis naturais e da energia, incluindo a mec√¢nica, a termodin√¢mica e a eletromagnetismo.'
        },
        {
          title: 'Astronomia',
          subtitle: 'Estudo do universo',
          content: 'A astronomia √© o estudo do universo, incluindo a forma√ß√£o e evolu√ß√£o de estrelas, gal√°xias e outros objetos celestes.'
        },
        {
          title: 'Ecologia',
          subtitle: 'Rela√ß√µes entre seres vivos',
          content: 'A ecologia √© o estudo das rela√ß√µes entre seres vivos e seu ambiente, incluindo a cadeia alimentar, a competi√ß√£o e a coopera√ß√£o.'
        }
      ],
      quizzes: [
        {
          question: "Qual √© o processo pelo qual as plantas produzem alimentos?",
          options: ["Respira√ß√£o", "Fotoss√≠ntese", "Decomposi√ß√£o", "Fermenta√ß√£o"],
          correct_answer: 1
        },
        {
          question: "Qual √© o nome do maior planeta do nosso sistema solar?",
          options: ["J√∫piter", "Saturno", "Urano", "Netuno"],
          correct_answer: 0
        }
      ]
    },
    { 
      id: 10, 
      name: 'Ingl√™s', 
      icon: 'üó£Ô∏è',
      topics: [
        {
          title: 'Gram√°tica',
          subtitle: 'Estrutura da l√≠ngua inglesa',
          content: 'A gram√°tica √© o estudo da estrutura da l√≠ngua inglesa, incluindo a conjuga√ß√£o de verbos, a concord√¢ncia de substantivos e adjetivos, e a estrutura de frases.'
        },
        {
          title: 'Vocabul√°rio',
          subtitle: 'Palavras e express√µes',
          content: 'O vocabul√°rio √© o estudo de palavras e express√µes em ingl√™s, incluindo a pron√∫ncia, a defini√ß√£o e o uso correto.'
        },
        {
          title: 'Conversa√ß√£o',
          subtitle: 'Pr√°tica oral',
          content: 'A conversa√ß√£o √© a pr√°tica oral da l√≠ngua inglesa, incluindo a comunica√ß√£o eficaz e a resolu√ß√£o de problemas.'
        },
        {
          title: 'Compreens√£o',
          subtitle: 'Listening e Reading',
          content: 'A compreens√£o √© o estudo da listening e reading em ingl√™s, incluindo a identifica√ß√£o de temas, a compreens√£o de textos e a resolu√ß√£o de exerc√≠cios.'
        },
        {
          title: 'Escrita',
          subtitle: 'Writing skills',
          content: 'A escrita √© o estudo da escrita em ingl√™s, incluindo a estrutura de par√°grafos, o uso de conectivos e a coer√™ncia textual.'
        }
      ],
      quizzes: [
        {
          question: "Qual √© o significado da palavra 'hello'?",
          options: ["Ol√°", "Tchau", "Obrigado", "Desculpe"],
          correct_answer: 0
        },
        {
          question: "Quem √© o autor da obra 'Romeu e Julieta'?",
          options: ["William Shakespeare", "Jane Austen", "Charles Dickens", "J.K. Rowling"],
          correct_answer: 0
        }
      ]
    },
  ]);

  const [selectedSubject, setSelectedSubject] = React.useState(null);
  const [searchTerm, setSearchTerm] = React.useState('');
  const [viewMode, setViewMode] = React.useState(null); 
  const [currentQuiz, setCurrentQuiz] = React.useState(null);
  const [userAnswer, setUserAnswer] = React.useState(null);

  const filteredSubjects = subjects.filter(subject =>
    subject.name.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const renderStudyView = () => (
    <div className="space-y-6">
      {selectedSubject?.topics.map((topic, index) => (
        <div key={index} className="card">
          <h3 className="text-xl font-bold">{topic.title}</h3>
          <h4 className="text-lg text-gray-600 mt-2">{topic.subtitle}</h4>
          <p className="mt-4 text-gray-800 text-justify">{topic.content}</p>
        </div>
      ))}
    </div>
  );

  const renderQuizView = () => {
    const handleAnswer = async () => {
      if (!userAnswer) return;

      const isCorrect = userAnswer === currentQuiz.correct_answer;
      
      const answeredQuiz = {
        ...currentQuiz,
        userAnswer,
        answered_at: new Date().toISOString(),
        isCorrect
      };
      
      setAnsweredQuizzes(prev => [...prev, answeredQuiz]);

      await room.collection('quiz_answer').create({
        subject: selectedSubject.name.toLowerCase(),
        question: currentQuiz.question,
        answer: currentQuiz.options[userAnswer],
        correct: isCorrect,
        answered_at: new Date().toISOString()
      });

      const currentIndex = selectedSubject.quizzes.indexOf(currentQuiz);
      if (currentIndex < selectedSubject.quizzes.length - 1) {
        setCurrentQuiz(selectedSubject.quizzes[currentIndex + 1]);
      } else {
        setCurrentQuiz(null);
      }
      setUserAnswer(null);
    };

    return (
      <div className="space-y-6">
        {currentQuiz ? (
          <div className="card">
            <h3 className="text-xl font-bold mb-4">{currentQuiz.question}</h3>
            <div className="space-y-3">
              {currentQuiz.options.map((option, index) => (
                <div 
                  key={index}
                  className={`p-3 rounded-lg cursor-pointer border-2 transition-colors duration-200
                    ${userAnswer === index 
                      ? 'border-indigo-600 bg-indigo-50' 
                      : 'border-gray-200 hover:border-indigo-300'}`}
                  onClick={() => setUserAnswer(index)}
                >
                  {option}
                </div>
              ))}
            </div>
            <div className="mt-4 flex justify-end">
              <button 
                className="btn btn-primary"
                onClick={handleAnswer}
                disabled={userAnswer === null}
              >
                Enviar Resposta
              </button>
            </div>
          </div>
        ) : (
          <>
            <div className="grid grid-cols-1 gap-4">
              {selectedSubject?.quizzes.map((quiz, index) => (
                <div 
                  key={index}
                  className="card hover:shadow-xl cursor-pointer"
                  onClick={() => setCurrentQuiz(quiz)}
                >
                  <h3 className="text-lg font-bold">{quiz.question}</h3>
                </div>
              ))}
            </div>
            
            {answeredQuizzes.length > 0 && (
              <div className="mt-8">
                <h3 className="text-xl font-bold mb-4">Perguntas Respondidas</h3>
                <div className="border-t border-gray-200 pt-4">
                  {answeredQuizzes.map((quiz, index) => (
                    <div key={index} className="card mb-4">
                      <h4 className="font-bold">{quiz.question}</h4>
                      <p className="mt-2">Sua resposta: {quiz.options[quiz.userAnswer]}</p>
                      <p className="text-sm text-gray-500 mt-2">
                        Respondida em: {new Date(quiz.answered_at).toLocaleTimeString()}
                      </p>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </>
        )}
      </div>
    );
  };

  return (
    <div>
      {!selectedSubject && (
        <>
          <div className="mb-6">
            <input
              type="text"
              placeholder="Pesquisar mat√©rias..."
              className="input w-full"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            {filteredSubjects.map(subject => (
              <div
                key={subject.id}
                className="card hover:shadow-xl cursor-pointer"
                onClick={() => setSelectedSubject(subject)}
              >
                <div className="text-center">
                  <span className="text-4xl">{subject.icon}</span>
                  <h3 className="mt-4 text-xl font-bold">{subject.name}</h3>
                </div>
              </div>
            ))}
          </div>
        </>
      )}

      {selectedSubject && !viewMode && (
        <div className="card">
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-2xl font-bold">
              {selectedSubject.icon} {selectedSubject.name}
            </h2>
            <button
              onClick={() => setSelectedSubject(null)}
              className="text-gray-500 hover:text-gray-700"
            >
              ‚úï
            </button>
          </div>
          <div className="flex space-x-4">
            <button 
              className="btn btn-primary flex-1"
              onClick={() => setViewMode('study')}
            >
              Acessar Material de Estudo
            </button>
            <button 
              className="btn btn-secondary flex-1"
              onClick={() => setViewMode('quiz')}
            >
              Ver Perguntas e Respostas
            </button>
          </div>
        </div>
      )}

      {selectedSubject && viewMode && (
        <div className="space-y-4">
          <div className="flex justify-between items-center">
            <h2 className="text-2xl font-bold">
              {selectedSubject.icon} {selectedSubject.name} - 
              {viewMode === 'study' ? ' Material de Estudo' : ' Perguntas e Respostas'}
            </h2>
            <button
              onClick={() => setViewMode(null)}
              className="btn btn-secondary"
            >
              Voltar
            </button>
          </div>
          {viewMode === 'study' ? renderStudyView() : renderQuizView()}
        </div>
      )}
    </div>
  );
}